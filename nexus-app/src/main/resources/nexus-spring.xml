<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"

       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
">
    
    <!--<bean class="com.github.nexus.api.PublicAPI" />-->
    
    <bean class="com.github.nexus.api.SomeResource" />
    
    <bean class="com.github.nexus.api.VersionResource"/>
    <bean class="com.github.nexus.api.UpCheckResource"/>
    <bean class="com.github.nexus.api.TransactionResource">
        <constructor-arg ref="transactionService"/>
    </bean>

    <bean name="transactionService" class="com.github.nexus.service.TransactionServiceImpl"/>
        
    <bean class="com.github.nexus.app.DefaultExceptionMapper" />
    
    <bean id="dataSource" class="org.h2.jdbcx.JdbcDataSource">
        <property name="url" value="jdbc:h2:mem:hello" />
        <property name="user" value="sa" />
        <property name="password" value="" />
    </bean>
    
    <bean class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        
        <property name="dataSource" ref="dataSource" />

        <property name="persistenceUnitName" value="hello" />
        
       
        <property name="jpaVendorAdapter">
            <bean class="org.springframework.orm.jpa.vendor.EclipseLinkJpaVendorAdapter">
                <property name="showSql" value="true"/>
                <property name="generateDdl" value="true"/>
                <property name="databasePlatform" value="org.eclipse.persistence.platform.database.H2Platform"/>
            </bean>
        </property>
        <property name="jpaDialect">
            <bean class="org.springframework.orm.jpa.vendor.EclipseLinkJpaDialect" />
        </property>  
        
        <property name="jpaPropertyMap">
            <props>
                <prop key="eclipselink.weaving">false</prop>
                <prop key="eclipselink.logging.level">FINEST</prop>
            </props>
        </property>         

    </bean>
    
</beans>
